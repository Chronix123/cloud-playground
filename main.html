{% extends 'base.html' %}

{% block head %}
<style>
  .logo .app-back {
    visibility: hidden;
  }
</style>
{% endblock %}

{% block main %}
<div ng-cloak ng-controller="MainController">

  <h1 class="projectlistheader">My Projects</h1>

  <table class="projectlist">

    <thead>
      <tr class="project">
        <th></th>
        <th class="projectid">Project</th>
        <th class="projectdescription">Description</th>
        <th class=""></th>
      </tr>
    </thead>

    <tbody>
      {% if projects %}
        {% for id, name, description in projects %}
          <tr class="project {{ loop.cycle('odd', 'even') }}">
            <td><button class="btn btn-small btn-success" ng-click="go('/bliss/p/{{id}}/')">Run</button>
            <td class="projectname">{{name}}</td>
            <td class="projectdescription">{{description}}</td>
            <td><button class="btn btn-small btn-danger" ng-click="prompt_to_delete_project('{{id}}','{{name}}')">delete</button></td>
          </tr>
        {% endfor %}
      {% else %}
        <tr class="project odd">
           <td colspan="4">
             <div>
               No projects created yet.<br>
             </div>
             <div style="color: gray;">
               Use the templates below to start a new project.</br>
               {% if not is_logged_in %}
               Or <a href="/bliss/login">login</a> to access your saved projects.
               {% endif %}
             </div>
           </td>
        </tr>
      {% endif %}
    </tbody>

  </table>
  {% for source, templates in template_tuples %}
    <h1>{{source.description}}</h1>
    <div class="{{ loop.cycle('one', 'two', 'three') }}">
      {% for t in templates %}
        <div class="newproject" style="margin: .5em;">
          <button class="btn" style="float: left;" ng-click="prompt_for_new_project('{{t.key.id()}}', '{{t.name}}', '{{t.description}}')">New Project</button>
          <div stlye="clear: both;">
             <div class="name">{{t.name}}</div>
             <div class="description">{{t.description}}</div>
          </div>
        </div>
      {% endfor %}
    </div>
  {% endfor %}

</div>
{% endblock %}
